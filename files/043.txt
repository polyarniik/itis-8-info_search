<!DOCTYPE html>

<html data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D" lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1.0,viewport-fit=cover,maximum-scale=1,user-scalable=0" name="viewport"/>
<meta content="unsafe-url" name="referrer"/>
<title>Istio, eBPF и RSocket Broker: подробный обзор service mesh / Хабр</title>







<meta content="2.113.0" name="habr-version"/>
<meta content="444736788986613" data-vue-meta="ssr" property="fb:app_id"/><meta content="472597926099084" data-vue-meta="ssr" property="fb:pages"/><meta content="summary_large_image" data-vue-meta="ssr" name="twitter:card"/><meta content="@habr_com" data-vue-meta="ssr" name="twitter:site"/><meta content="Хабр" data-vmid="og:site_name" data-vue-meta="ssr" property="og:site_name"/><meta content="Istio, eBPF и RSocket Broker: подробный обзор service mesh" data-vmid="og:title" data-vue-meta="ssr" property="og:title"/><meta content="Istio, eBPF и RSocket Broker: подробный обзор service mesh" data-vmid="twitter:title" data-vue-meta="ssr" name="twitter:title"/><meta content="Istio, eBPF и RSocket Broker: подробный обзор service mesh" data-vmid="aiturec:title" data-vue-meta="ssr" name="aiturec:title"/><meta content="Все мы знаем, как трудно управлять современными приложениями, которые состоят из микросервисов со сложным взаимодействием между ними. Причём управлять одними только микросервисами будет недостаточно,..." data-vmid="description" data-vue-meta="ssr" name="description"/><meta content="Все мы знаем, как трудно управлять современными приложениями, которые состоят из микросервисов со сложным взаимодействием между ними. Причём управлять одними только микросервисами будет недостаточно,..." data-vmid="description:itemprop" data-vue-meta="ssr" itemprop="description"/><meta content="Все мы знаем, как трудно управлять современными приложениями, которые состоят из микросервисов со сложным взаимодействием между ними. Причём управлять одними только микросервисами будет недостаточно,..." data-vmid="og:description" data-vue-meta="ssr" property="og:description"/><meta content="Все мы знаем, как трудно управлять современными приложениями, которые состоят из микросервисов со сложным взаимодействием между ними. Причём управлять одними только микросервисами будет недостаточно,..." data-vmid="twitter:description" data-vue-meta="ssr" name="twitter:description"/><meta content="Все мы знаем, как трудно управлять современными приложениями, которые состоят из микросервисов со сложным взаимодействием между ними. Причём управлять одними только микросервисами будет недостаточно,..." data-vmid="aiturec:description" data-vue-meta="ssr" property="aiturec:description"/><meta content="https://habrastorage.org/getpro/habr/upload_files/2d6/413/c51/2d6413c5105b7bf5c9eabe78be185f17.png" data-vmid="image:itemprop" data-vue-meta="ssr" itemprop="image"/><meta content="https://habrastorage.org/getpro/habr/upload_files/2d6/413/c51/2d6413c5105b7bf5c9eabe78be185f17.png" data-vmid="og:image" data-vue-meta="ssr" property="og:image"/><meta content="1200" data-vmid="og:image:width" data-vue-meta="ssr" property="og:image:width"/><meta content="630" data-vmid="og:image:height" data-vue-meta="ssr" property="og:image:height"/><meta content="https://habrastorage.org/getpro/habr/upload_files/2d6/413/c51/2d6413c5105b7bf5c9eabe78be185f17.png" data-vmid="aiturec:image" data-vue-meta="ssr" property="aiturec:image"/><meta content="https://habrastorage.org/getpro/habr/upload_files/2d6/413/c51/2d6413c5105b7bf5c9eabe78be185f17.png" data-vmid="twitter:image" data-vue-meta="ssr" name="twitter:image"/><meta content="https://habrastorage.org/getpro/habr/upload_files/2d6/413/c51/2d6413c5105b7bf5c9eabe78be185f17.png?format=vk" data-vmid="vk:image" data-vue-meta="ssr" property="vk:image"/><meta content="718534" data-vmid="aiturec:item_id" data-vue-meta="ssr" property="aiturec:item_id"/><meta content="2023-02-22T09:07:31.000Z" data-vmid="aiturec:datetime" data-vue-meta="ssr" property="aiturec:datetime"/><meta content="https://habr.com/ru/company/southbridge/blog/718534/" data-vmid="og:url" data-vue-meta="ssr" property="og:url"/><meta content="article" data-vmid="og:type" data-vue-meta="ssr" property="og:type"/><meta content="ru_RU" data-vmid="og:locale" data-vue-meta="ssr" property="og:locale"/><meta content="service mesh, istio, ebpf, rsocket, it-инфраструктура, системное администрирование, образование онлайн, образование в it, карьера ит-специалиста, карьера программиста" data-vue-meta="ssr" name="keywords"/>

<meta content="#303b44" name="apple-mobile-web-app-status-bar-style"/>
<meta content="#629FBC" name="msapplication-TileColor"/>
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="yes" name="mobile-web-app-capable"/>
































</head>
<body>
<div data-async-called="true" data-server-rendered="true" id="app"><div class="tm-layout__wrapper"><!-- --> <div></div> <div class="tm-feature tm-feature"><!-- --></div> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><div class="tm-header__burger-nav"><button class="tm-header__button tm-header__button_burger" type="button"><svg class="tm-svg-img tm-header__icon tm-header__icon-burger" height="16" width="16"><title>Меню</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#header-burger"></use></svg></button></div> <span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_ru" href="/ru/"><svg class="tm-svg-img tm-header__icon" height="16" width="16"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <!-- --> <div class="tm-header-user-menu tm-header_user-menu"><a class="tm-header-user-menu__item tm-header-user-menu__search" href="/ru/search/"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search" height="24" width="24"><title>Поиск</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#search"></use></svg></a> <!-- --> <!-- --> <!-- --> <div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle" data-test-id="menu-toggle-guest"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_white" height="24" width="24"><title>Профиль</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#header-user"></use></svg></button> <!-- --></div> <!-- --></div></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <!-- --> <!-- --> <div class="tm-page-width"></div> <main class="tm-layout__container"><div class="tm-page" companyname="southbridge" data-async-called="true" hl="ru"><div class="tm-page-width"><div class="tm-page__header"><!-- --></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><!-- --> <div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg class="tm-svg-img pull-down__arrow" height="24" width="24"><title>Обновить</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet tm-article-snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a class="tm-user-info__userpic" href="/ru/users/Anna_sokol22/" title="Anna_sokol22"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="32" src="//habrastorage.org/r/w32/getpro/habr/avatars/8a0/768/a4b/8a0768a4b3e1a9fdcddae1bb0d0b5ee2.jpg" width="32"/></div></a> <span class="tm-user-info__user"><a class="tm-user-info__username" href="/ru/users/Anna_sokol22/">
      Anna_sokol22
      <!-- --></a> <span class="tm-article-datetime-published"><time datetime="2023-02-22T09:07:31.000Z" title="2023-02-22, 12:07">10 часов назад</time></span></span></span></div> <!-- --></div> <h1 class="tm-article-snippet__title tm-article-snippet__title_h1" lang="ru"><span>Istio, eBPF и RSocket Broker: подробный обзор service mesh</span></h1> <div class="tm-article-snippet__stats"><!-- --> <div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Время на прочтение</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#clock"></use></svg></span> <span class="tm-article-reading-time__label">
    11 мин
  </span></div> <span class="tm-icon-counter tm-data-icons__item"><svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24"><title>Количество просмотров</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-views"></use></svg> <span class="tm-icon-counter__value">457</span></span></div> <div class="tm-article-snippet__hubs-container"><div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a class="tm-article-snippet__hubs-item-link router-link-active" href="/ru/company/southbridge/blog/"><span>Блог компании Southbridge</span> <!-- --></a></span><span class="tm-article-snippet__hubs-item"><a class="tm-article-snippet__hubs-item-link" href="/ru/hub/sys_admin/"><span>Системное администрирование</span> <span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span></a></span><span class="tm-article-snippet__hubs-item"><a class="tm-article-snippet__hubs-item-link" href="/ru/hub/it-infrastructure/"><span>IT-инфраструктура</span> <span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span></a></span><span class="tm-article-snippet__hubs-item"><a class="tm-article-snippet__hubs-item-link" href="/ru/hub/career/"><span>Карьера в IT-индустрии</span> <!-- --></a></span></div></div> <div class="tm-article-snippet__labels-container"><div class="tm-article-snippet__labels"><!-- --> <div class="tm-article-snippet__label tm-article-snippet__label tm-article-snippet__label_variant-translation"><span>
          Перевод
        </span></div></div></div> <!-- --> <!-- --></div></div> <div class="tm-article-presenter__origin"><a class="tm-article-presenter__origin-link" href="https://medium.com/geekculture/istio-ebpf-and-rsocket-broker-a-deep-dive-into-service-mesh-7ec4871d50bb" target="_blank">
                Автор оригинала:
                <span>
                  Kondah Mouad
                </span></a></div> <div class="tm-article-body" data-gallery-root="" lang="ru"><div></div> <div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/2d6/413/c51/2d6413c5105b7bf5c9eabe78be185f17.png" height="440" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/2d6/413/c51/2d6413c5105b7bf5c9eabe78be185f17.png" width="780"><figcaption></figcaption></img></figure><p>Все мы знаем, как трудно управлять современными приложениями, которые состоят из микросервисов со сложным взаимодействием между ними. Причём управлять одними только микросервисами будет недостаточно, нужен комплексный подход.</p><p>В этой статье мы под разными углами рассмотрим управление сервисами и узнаем, как решать эти задачи с помощью service mesh, Istio, eBPF и RSocket Broker.</p><h2>1. Управление сервисами</h2><p>Микросервисы должны слаженно работать вместе, чтобы приложение выполняло задуманные бизнес-задачи. Сервисы не должны выходить за определённые нами границы контекста.</p><p>Мы управляем сервисами с разных сторон:</p><ul><li><p>Регистрация и обнаружение сервисов: Consul, ZooKeeper</p></li><li><p>Конфигурация сервисов: Spring Cloud Config</p></li><li><p>Взаимодействие между сервисами: Hystrix</p></li><li><p>Шлюз: Zuul, Spring Cloud Gateway</p></li><li><p>Балансировка нагрузки: Ribbon, Feign</p></li><li><p>Отслеживание: Sleuth, Zipkin, Htrace</p></li><li><p>Мониторинг: Grafana, Promethues</p></li></ul><p>Чуть позже мы обсудим некоторые из этих инструментов.</p><h2>Регистрация и обнаружение сервисов   </h2><p>Для эффективной работы в облаке монолитные приложения делят на небольшие фрагменты — микросервисы, которые можно развёртывать независимо друг от друга.</p><p>Когда один сервис хочет пообщаться с другим, ему нужно узнать IP-адрес и номер порта своего будущего собеседника. Можно, конечно, просто создать файл конфигурации, где будут записаны IP-адреса и порты всех целевых сервисов, но у этого подхода много недостатков. Например он плохо масштабируется, что противоречит самой сути облака, где количество экземпляров серверов можно менять в зависимости от текущей нагрузки.</p><p>Эту задачу можно решить с помощью обнаружения сервисов. Когда новый сервис готов обслуживать клиентские запросы, он регистрируется в реестре сервисов, сообщая свой IP и номер порта. Клиенты обращаются к реестру сервисов, чтобы получить эту информацию. Кроме того, мониторинг работоспособности позволяет направлять трафик только к здоровым экземплярам.</p><h2>Балансировка нагрузки</h2><p>Балансировка нагрузки — это стратегия планирования запросов, при которой мы координируем несколько серверов для эффективного распределения поступающих запросов. Ниже мы посмотрим, как интеллектуально распределять клиентские запросы по пулам серверов с помощью RSocket.</p><h2>2. Sidecar</h2><p>Некоторые функции приложения, не связанные с бизнес-логикой, можно выделить в так называемые <strong>sidecar’ы</strong>, при этом сократив и упростив код. <strong>Sidecar-контейнер</strong>, развёрнутый рядом с сервисом, скажем, в одном поде в Kubernetes, может взять на себя наблюдаемость, мониторинг, логирование, конфигурация и размыкатели цепи (circuit breaker).</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/269/076/2a0/2690762a0b0fca4c850b029de4a356b5.jpg" height="583" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/269/076/2a0/2690762a0b0fca4c850b029de4a356b5.jpg" width="1335"/><figcaption></figcaption></figure><p>В режиме sidecar прокси-контейнеры делят с контейнерами приложения в этом поде пространство имён сети. Пространство имён сети — это структура ядра Linux, благодаря которой у контейнеров и подов могут быть свои независимые сетевые стеки, изолирующие друг от друга контейнеризованные приложения. Поэтому сколько угодно подов могут выполнять веб-приложение и использовать порт 80. У прокси будет то же пространство имён сети, так что он сможет перехватывать и обрабатывать входящий и исходящий трафик контейнера приложения.</p><h2>3. Service mesh</h2><p>В микросервисной архитектуре мы можем объединять несколько модулей с одной задачей и функцией, чтобы создавать очень большие и сложные приложения.</p><p>Сначала микросервисы использовали внутренний SDK для обнаружения сервисов, повторных запросов и других функций (например, Spring Cloud). Это серьёзно усложняло жизнь разработчикам, которым приходилось включать SDK в программный стек и использовать ограниченный набор языков программирования, не говоря уже о сложностях обновления и развёртывания, нарушениях принципов agility (при обновлении SDK приходилось обновлять и приложение), фрагментации версий и необходимости получать новые навыки и знания. Новые версии приложений приходилось выпускать даже тогда, когда бизнес-логика совсем не менялась, потому что нефункциональный код был неотделим от бизнес-кода.</p><h2>Service mesh   </h2><p>Service mesh — это инфраструктурный уровень, где обрабатываются коммуникации между сервисами через sidecar, который служит как прозрачный прокси для безопасного, быстрого и надёжного обмена данными.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/ed2/13b/e95/ed213be9554c6e7e58bf99479eef39ad.jpg" height="525" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/ed2/13b/e95/ed213be9554c6e7e58bf99479eef39ad.jpg" width="850"/><figcaption></figcaption></figure><p>При использовании service mesh мы можем абстрагировать от приложения большую часть возможностей SDK, упаковать их в независимые контейнеры и развернуть как sidecar’ы. Когда задачи по управлению сервисами лежат на инфраструктуре, сами микросервисы выполняют только бизнес-логику.</p><p>Команда по инфраструктуре занимается разными общими функциями, а мы получаем возможности независимого развития, прозрачных апгрейдов и улучшения общей эффективности.</p><p>Service mesh состоит из двух основных компонентов: control plane и data plane. Две самых популярных платформы service mesh — Istio и Linkerd. В этой статье мы будем рассматривать Istio.</p><p>У service mesh относительно простая архитектура — пользовательские агенты рядом с сервисами плюс набор процессов по управлению задачами. Агенты составляют data plane, а управляющие процессы — control plane. Data plane перехватывает вызовы между разными сервисами и обрабатывает их, а control plane координирует поведение агентов и предоставляет API или инструменты командной строки, чтобы управлять версиями для конвейера непрерывной интеграции и развёртывания.</p><p>Сервисы не вызывают друг друга по сети напрямую, а обращаются к своим sidecar’ам, которые берут на себя управление запросами и прочие тонкости коммуникаций.</p><h2>4. Как работает Istio   </h2><p>Istio — это  опенсорс-платформа для управления сервисами с помощью service mesh в облачном окружении с Kubernetes. Istio отвечает за балансировку нагрузки, аутентификацию между сервисами, мониторинг и другие задачи.</p><h2>Архитектура Istio</h2><p>Istio состоит из control plane и data plane.</p><p><strong>Data plane</strong> состоит из агентов, которые развёртываются как sidecar’ы при каждом сервисе. Sidecar перехватывает весь входящий и исходящий трафик сервиса и вместе с control plane применяет к нему настроенные правила и действия.</p><p><strong>Control plane</strong> управляет sidecar’ами на data plane и занимается распределением, обнаружением сервисов, авторизацией, аутентификацией и другими функциями. <strong>Благодаря control plane можно согласованно управлять data plane</strong>.</p><h2>Основные компоненты</h2><p>Давайте рассмотрим главные функции основных компонентов архитектуры Istio.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/740/638/eb1/740638eb1d92fb4c61e3c9798dcd32ab.jpg" height="390" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/740/638/eb1/740638eb1d92fb4c61e3c9798dcd32ab.jpg" width="817"/><figcaption></figcaption></figure><h2>Envoy</h2><p>Envoy — это высокопроизводительный агент, написанный на C++. Istio внедряет Envoy в виде sidecar-контейнера к контейнеру приложений, чтобы он перехватывал весь входящий и исходящий трафик сервиса и выполнял с ним разные задачи, включая балансировку нагрузки, размыкание цепи, внесение ошибок, а также предоставлял метрики, скажем, для Prometheus и Jaeger. Все внедрённые агенты вместе образуют <strong>data plane</strong>.</p><h2>Istiod   </h2><p>Istiod — это компонент control plane, который отвечает за обнаружение сервисов, конфигурацию и управление сертификатами. Istiod преобразует сложные правила в формате YAML в практическую конфигурацию для Envoy, а затем распространяет эту конфигурацию по всем sidecar’ам в service mesh.</p><p><strong>Pilot </strong>преобразует информацию о конфигурации, например правила маршрутизации, в формат, который будет понятен sidecar’ам, и отправляет её на data plane. Он распространяет конфигурацию и помогает sidecar’ам выполнять задачи по управлению трафиком.</p><p><strong>Citadel —</strong> это компонент Istio, который отвечает за безопасность. Он создаёт сертификаты, чтобы разрешить защищённое mTLS-взаимодействие между агентами на data plane.</p><p><strong>Gallery — </strong>это новый компонент в версии Istio 1.1, который отделяет Pilot от базовой платформы, вроде Kubernetes. Он берет на себя часть исходных функций Pilot и отвечает за верификацию, извлечение и обработку конфигурации.</p><h2>Переадресация трафика в Istio</h2><p>Для входящего и исходящего трафика существуют отдельные процессы маршрутизации.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/539/0cc/7dd/5390cc7dd1327452f338a80e791570a8.jpg" height="907" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/539/0cc/7dd/5390cc7dd1327452f338a80e791570a8.jpg" width="1443"/><figcaption></figcaption></figure><p>Обработчики входящего трафика пересылают трафик в контейнер своего приложения, а обработчики исходящего ждут исходящий трафик. Istio использует init-контейнер для работы с iptables в пространстве имён сети пода и обработки правил, чтобы входящие и исходящие пакеты передавались в sidecar-прокси пода.</p><p>Init-контейнер отличается от контейнера приложения:</p><ul><li><p>Он запускается до главного контейнера и всегда выполняется до конца.</p></li><li><p>Если init-контейнеров несколько, они выполняются друг за другом.</p></li></ul><p>Когда мы говорим о service mesh, мы обычно представляем себе sidecar, управляемый Istio + Envoy. На первый взгляд, это неплохой подход, но не без недостатков:</p><ul><li><p>Снижение производительности. Прокси — это отдельное приложение, которое тоже потребляет процессорные ресурсы и оперативную память. Для Envoy обычно требуется около 1 ГБ памяти.</p></li><li><p>Сложная архитектура. Нам нужен control plane, data plane, правила для разных приложений, безопасность взаимодействия между прокси и т. д.</p></li><li><p>Больше расходов на эксплуатацию и обслуживание. Невозможно развернуть sidecar без автоматизированных инструментов. Обычно service mesh работает в Kubernetes, что позволяет сократить нагрузку.</p></li></ul><h2>5. Что такое eBPF</h2><p>Когда мы используем sidecar, нам приходится развёртывать в каждом поде контейнер с нужной конфигурацией. У каждой ноды только одно ядро, и все контейнеры на одной ноде используют это ядро. А нельзя ли в таком случае ограничиться одним sidecar-прокси на ноду? eBPF как раз об этом.</p><p>Это технология, с помощью которой в ядре можно запускать пользовательские программы в ответ на события. События могут быть самыми разными, включая вход в функцию и выход из неё (в ядре или пользовательском пространстве) или поступление важных сетевых пакетов. Если добавить программу eBPF к событию, она будет срабатывать независимо от того, какой процесс вызвал это событие и где он находится — в контейнере приложения или на хосте. Решения на базе eBPF дают возможности мониторинга, безопасности и взаимодействий <strong>без sidecar</strong>.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/c2c/21a/642/c2c21a642aeafde510735a1ed6099998.jpg" height="440" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/c2c/21a/642/c2c21a642aeafde510735a1ed6099998.jpg" width="747"/><figcaption></figcaption></figure><p>2 декабря 2021 года проект Cilium объявил о программе бета-тестирования <a href="https://cilium.io/blog/2021/12/01/cilium-service-mesh-beta"><u>Cilium Service Mesh</u></a>. <a href="http://cilium.io/"><u>Cilium</u></a> использует eBPF и обходится без sidecar’ов для выполнения таких задач, как маршрутизация на L7, балансировка нагрузки, TLS, политики доступа, проверки работоспособности, логирование и трассировка.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/67c/020/047/67c020047ea52b774a8bd90f05855c52.jpg" height="337" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/67c/020/047/67c020047ea52b774a8bd90f05855c52.jpg" width="788"/><figcaption></figcaption></figure><p>Что нам это даёт?</p><h2>Сокращение YAML</h2><p>Когда мы используем sidecar’ы и хотим добавить sidecar-контейнер, нам приходится вносить изменения в YAML с описанием каждого пода приложения. Обычно этот процесс автоматизирован. Например, мы используем модифицирующий вебхук, чтобы внедрить sidecar в момент развёртывания пода приложения.</p><p>В Istio, например, мы создаём теги для пространства имён Kubernetes и подов, чтобы указать, нужно ли внедрять sidecar.</p><p>А если что-то пойдёт не так? Если пространство имён или под помечены ошибочно, sidecar не будет внедрён и под не сможет подключиться к service mesh. Более того, если злоумышленник проникнет в кластер и запустит вредоносную рабочую нагрузку, мы её не обнаружим из-за отсутствия наблюдаемости.</p><p>Если мы используем eBPF, а не sidecar’ы, поды можно обнаруживать без дополнительного кода YAML. Вместо этого мы используем CRD, чтобы настроить service mesh в кластере. Уже запущенный под можно включить в service mesh без перезапуска.</p><p>Если злоумышленник попытается обойти оркестрацию Kubernetes, запустив рабочую нагрузку прямо на хосте, eBPF обнаружит это действие и возьмёт над ним контроль, потому что из ядра всё видно.</p><h2>Эффективность сети</h2><p>В сети с eBPF пакеты могут обходить некоторые сетевые стеки ядра, что позволяет повысить производительность. Давайте посмотрим, как это реализуется на data plane в service mesh.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/83e/93b/dfa/83e93bdfa3803981aa52adfb950874f9.jpg" height="377" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/83e/93b/dfa/83e93bdfa3803981aa52adfb950874f9.jpg" width="785"/><figcaption></figcaption></figure><p>В модели с eBPF и без sidecar’ов путь сетевых пакетов гораздо короче.</p><p>В service mesh агент выполняется как sidecar в традиционной сети, и путь пакета к приложению неблизкий: входящий пакет проходит через стек TCP/IP хоста и подключается к пространству имён и к поду через виртуальный Ethernet. Оттуда пакет проходит через сетевой стек пода к агенту, а тот уже направляет пакет к приложению через loopback интерфейс. Не забывайте, что трафик проходит через прокси в обе стороны, так что service mesh ощутимо увеличивает задержку.</p><p>Реализации Kubernetes CNI на основе eBPF, такие как Cilium, могут с помощью программы eBPF и хуков по-умному перенаправлять пакеты по более прямому маршруту. Cilium знает идентификаторы всех конечных точек и сервисов Kubernetes. Когда пакет поступает на хост, Cilium напрямую назначает его нужному прокси или конечной точке пода.</p><h2>Шифрование в сети</h2><p>Service mesh обычно отвечает за аутентификацию и шифрование всего трафика приложения. При использовании mTLS (взаимного TLS) прокси в service mesh выступают как конечные точки сетевого соединения и договариваются о защищённом TLS-соединении с собеседником. Соединение шифрует взаимодействие между агентами без изменения кода приложения.</p><p>Реализовать аутентификацию между компонентами и шифрование трафика можно не только с помощью TLS на уровне приложения. Мы можем шифровать трафик на уровне сети, используя IPSec или WireGueard. Шифрование на уровне сети полностью прозрачно не только для приложений, но и для агентов, и его можно включить даже без service mesh. Если service mesh нужна вам только для шифрования, возможно, стоит просто наладить шифрование на уровне сети. Во-первых, так проще, а во-вторых, так мы сможем шифровать любой трафик на нодах, а не только для рабочих нагрузок с sidecar’ом.</p><h2>6. RSocket Broker</h2><p>RSocket Broker — это система коммуникации между самыми разными приложениями по протоколу RSocket.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/428/31e/d73/42831ed73e16d36a9bb1b874b863e900.jpg" height="510" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/428/31e/d73/42831ed73e16d36a9bb1b874b863e900.jpg" width="666"/><figcaption></figcaption></figure><p>Как работает RSocket Broker? Запрашивающий сервис (Requester) инициирует вызов к брокеру, брокер перенаправляет запрос отвечающему сервису (Responder), а потом возвращает запрашивающему сервису полученный результат.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/7dc/e72/aea/7dce72aea15b2b81f18fbb48dda01c11.jpg" height="498" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/7dc/e72/aea/7dce72aea15b2b81f18fbb48dda01c11.jpg" width="847"/><figcaption></figcaption></figure><p>Когда отвечающий сервис запускается, он активно создаёт долгосрочное TCP-соединение с брокером и передаёт ему список сервисов, которые может обслуживать. Когда запрашивающий сервис запускается, он тоже создаёт с брокером долгосрочное соединение. Когда затем он хочет вызвать удалённый сервис, он инкапсулирует запрос в сообщение с уникальным идентификатором и направляет его брокеру. Брокер получает сообщение, определяет сервис-получатель по доступным метаданным и ищет сервис во внутренней таблице маршрутизации. Когда тот сервис обработает запрос, он тоже инкапсулирует результат в сообщение и отправляет его брокеру. Брокер считывает идентификатор сообщения и пересылает его нужному вызывающему сервису, который применяет соответствующую бизнес-логику в зависимости от ответа.</p><p>Преимущества обмена сообщениями через брокер:</p><ul><li><p>Не нужны дополнительные проверки работоспособности, потому что мы уверены в соединении.</p></li><li><p>Сервис, обрабатывающий запрос, больше не должен прослушивать порт, и этот подход кардинально отличается от HTTP REST API и gRPC и даёт больше безопасности.</p></li><li><p>Запрашивающий и отвечающий сервис не обязаны знать о существовании друг друга.</p></li><li><p>Появляется возможность управления потоком: если нагрузка на отвечающий сервис возрастает, брокер автоматически пересылает сообщение другому сервису с помощью интеллектуальной балансировки нагрузки.</p></li><li><p>Регистрация и обнаружение сервисов теперь не требуют сторонних реестров, вроде Eureka, Consul или ZooKeeper, так что расходы на инфраструктуру ниже.</p></li><li><p>Брокер проверяет права доступа сервисов на обоих концах, и мы развёртываем поддержку TLS только на брокере, чтобы защитить каналы коммуникации.</p></li></ul><h2>Недостатки</h2><p>У брокера есть свои минусы. Производительность будет чуть ниже, потому что стороны не общаются друг с другом напрямую. Кроме того, весь трафик перенаправляется через брокер, так что в сети появляется узкое место. Хотя эту проблему можно частично решить, обеспечив высокую надёжность кластера и брокера.</p><h2>7. Управление сервисами с помощью RSocket Broker</h2><p>Istio Service Mesh сложно реализовать за пределами дата-центров. А как же IoT-устройства? Нужно установить sidecar на каждом смартфоне? Эту задачу можно решить с помощью RSocket Broker.</p><p>На схеме service mesh на базе RSocket Broker мы не видим ни sidecar, ни дублирования процессов.</p><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/4ed/8c3/56b/4ed8c356b6bdddbfc87e2282b9966cf2.jpg" height="417" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/4ed/8c3/56b/4ed8c356b6bdddbfc87e2282b9966cf2.jpg" width="811"/><figcaption></figcaption></figure><p>Давайте сравним характеристики двух архитектур:</p><ul><li><p>Уровень инфраструктуры. С одной стороны у нас связка sidecar-прокси + control plane, а с другой — централизованный брокер с интегрированными функциями control plane.</p></li><li><p>Централизованное управление. Все логи, метрики и другая полезная информация находятся в одном месте, что упрощает управление.</p></li><li><p>Протокол связи. Минус использования брокера RSocket в том, что между приложениями нужно использовать протокол RSocket.</p></li><li><p>Доступ к приложениям и устройствам. Не на всех устройствах можно установить прокси, и тогда на выручку приходит схема на основе RSocket.</p></li><li><p>Расходы на эксплуатацию и обслуживание выше. Управлять одним кластером RSocket Broker на 10 серверов — это не то же самое, что управлять 10 000 экземпляров прокси.</p></li><li><p>Эффективность. У RSocket производительность в десять раз выше, чем у HTTP.</p></li><li><p>Безопасность. В RSocket безопасность реализуется проще. Брокер использует TLS + JWT, а не mTLS, так что управлять сертификатами не нужно. При этом благодаря модели безопасности JWT мы получаем более детальный контроль разрешений. При использовании RSocket Broker можно сократить поверхность атаки.</p></li></ul><figure class="full-width"><img data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/b64/a00/97f/b64a0097fed7f52dd0e1c27ff6703dd9.jpg" height="100" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/b64/a00/97f/b64a0097fed7f52dd0e1c27ff6703dd9.jpg" width="780"/><figcaption></figcaption></figure><p>Старт практического <a href="https://slurm.io/intensive-service-mesh?utm_source=habr&amp;utm_medium=article&amp;utm_campaign=intensive-service-mesh&amp;utm_content=article_22-02-2023&amp;utm_term=annavanna"><u>интенсива по service mesh </u></a>24 марта.  </p><p>Зависимость от инфраструктуры и сети. У RSocket Broker есть большое преимущество над Istio: он работает не только с Kubernetes. Да, считается, что Istio тоже работает с другими платформами, но по факту управлять sidecar-прокси за пределами Kubernetes слишком сложно. Зато RSocket Broker можно развернуть где угодно.</p><h2>Заключение</h2><p>Учитывая популярность микросервисных приложений, вопрос управления сервисами стоит довольно остро. В этой статье мы рассмотрели, как управлять сервисами с помощью Istio, eBPF и RSocket Broker.</p><details class="spoiler"><summary>Узнать о best practices в работе с service mesh</summary><div class="spoiler__content"><p>Service mesh <strong>—</strong> палочка-выручалочка для работы с микросервисами. Этот инструмент обеспечивает прозрачное <strong>управление входящим и исходящим трафиком</strong> в едином месте. Сегодня о знании service mesh спрашивают при трудоустройстве в таких крупных компаниях как Linkerd, Ozon, Сбер, ЮMoney, МТС, Спортмастер, Газпром и др.</p><p>На интенсиве по Service mesh вы изучите инструмент на практике и научитесь решать целый ряд проблем, возникающих при работе с микросервисами.</p><p><strong>Бизнес-кейсы, которые будем решать</strong>:</p><ul><li><p><strong>Проблема #1. </strong>Отсутствие или слабое развитие мониторинга. Периодическое торможение системы, но непонятно, где именно.</p></li></ul><ul><li><p><strong>Проблема #2. </strong>Выдача ошибок сервисами, со слов клиентов. Частые падения, хотя и кратковременные.</p></li></ul><ul><li><p><strong>Проблема #3. </strong>Нужно выкатить новую фичу, но нет уверенности, что все пойдет как надо.</p></li></ul><ul><li><p><strong>Проблема #4. </strong>В системе появляется новый компонент который отвечает за процессинг кредитных карт. Появляются требования к безопасности системы всей системы.</p></li></ul><ul><li><p><strong>Проблема #5. </strong>Приложение разрослось. Клиенты жалуются на долгое время ответа. На серверной стороне все ок. Похоже проблема с удаленными геолокациями.</p></li></ul><p><strong>Интенсив пройдет с 24 по 26 марта.</strong> Вы узнаете о best practices от эксперта, который уже давно работает с технологией. Помимо голой теории и практики, вы получите рекомендации, как делать, а как – нет.</p><p>Посмотреть программу и записаться : <a href="https://slurm.club/3ItpvWY">https://slurm.club/3ItpvWY</a></p></div></details><p></p></div></div></div> <!-- --> <!-- --></div> <!-- --> <!-- --></div> <!-- --> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bservice%20mesh%5D">service mesh</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bistio%5D">istio</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bebpf%5D">ebpf</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Brsocket%5D">rsocket</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bit-%D0%B8%D0%BD%D1%84%D1%80%D0%B0%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0%5D">it-инфраструктура</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D0%BE%D0%B5%20%D0%B0%D0%B4%D0%BC%D0%B8%D0%BD%D0%B8%D1%81%D1%82%D1%80%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%5D">системное администрирование</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BE%D0%BD%D0%BB%D0%B0%D0%B9%D0%BD%5D">образование онлайн</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B2%20it%5D">образование в it</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BA%D0%B0%D1%80%D1%8C%D0%B5%D1%80%D0%B0%20%D0%B8%D1%82-%D1%81%D0%BF%D0%B5%D1%86%D0%B8%D0%B0%D0%BB%D0%B8%D1%81%D1%82%D0%B0%5D">карьера ит-специалиста</a></li><li class="tm-separated-list__item"><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BA%D0%B0%D1%80%D1%8C%D0%B5%D1%80%D0%B0%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82%D0%B0%5D">карьера программиста</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a class="tm-hubs-list__link router-link-active" href="/ru/company/southbridge/blog/">Блог компании Southbridge</a></li><li class="tm-separated-list__item"><a class="tm-hubs-list__link" href="/ru/hub/sys_admin/">Системное администрирование</a></li><li class="tm-separated-list__item"><a class="tm-hubs-list__link" href="/ru/hub/it-infrastructure/">IT-инфраструктура</a></li><li class="tm-separated-list__item"><a class="tm-hubs-list__link" href="/ru/hub/career/">Карьера в IT-индустрии</a></li></ul></div></div></article></div> <!-- --></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article" height="24" width="24"><title>Всего голосов 10: ↑10 и ↓0</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-rating"></use></svg> <span class="tm-votes-meter__value tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating" title="Всего голосов 10: ↑10 и ↓0">+10</span></div> <div class="v-portal" style="display:none;"></div></div> <!-- --> <!-- --> <button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-favorite"></use></svg></span> <span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">
    12
  </span></button> <div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a class="tm-article-comments-counter-link__link" href="/ru/company/southbridge/blog/718534/comments/"><svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value">
      0
    </span></a> <!-- --></div> <div class="tm-sharing tm-data-icons__item" title="Поделиться"><button class="tm-sharing__button" type="button"><svg class="tm-sharing__icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z" fill="currentColor"></path></svg></button> <div class="v-portal" style="display:none;"></div></div> <div class="v-portal" style="display:none;"></div></div> </div></div> <div class="v-portal" style="display:none;"></div> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!-- --> <div></div> <section class="tm-block tm-block tm-block_spacing-bottom"><!-- --> <div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a class="tm-company-snippet__logo-link" href="/ru/company/southbridge/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="40" src="//habrastorage.org/getpro/habr/company/754/d93/3ca/754d933caeb494c6127add17ff60feb5.png" width="40"/></div></a> <div class="tm-company-snippet__info"><a class="tm-company-snippet__title" href="/ru/company/southbridge/profile/">Southbridge</a> <div class="tm-company-snippet__description">Обеспечиваем стабильную работу highload-проектов</div></div></div> <div class="tm-article-author__buttons"><!-- --> <!-- --></div></div> <div class="tm-article-author__company-contacts"><a class="tm-article-author__contact" href="https://southbridge.io/" rel="noopener" target="_blank">
      Сайт
    </a><a class="tm-article-author__contact" href="https://slurm.io/" rel="noopener" target="_blank">
      Сайт
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a class="tm-user-card__userpic tm-user-card__userpic_size-40" href="/ru/users/Anna_sokol22/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" src="//habrastorage.org/getpro/habr/avatars/8a0/768/a4b/8a0768a4b3e1a9fdcddae1bb0d0b5ee2.jpg"/></div></a> <div class="tm-user-card__meta"><div class="tm-counter-container tm-karma tm-karma" title=" 101 голос "><div class="tm-counter-container__header"><div class="tm-karma__votes tm-karma__votes_positive">
      11
    </div></div> <div class="tm-counter-container__footer"><div class="tm-karma__text">
      Карма
    </div> <div class="v-portal" style="display:none;"></div></div></div> <div class="tm-counter-container" title="Рейтинг пользователя"><div class="tm-counter-container__header"> <div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --> <div class="tm-votes-lever__score tm-votes-lever__score tm-votes-lever__score_appearance-rating"><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter tm-votes-lever__score-counter_rating">
        71.9
      </span></div> <!-- --></div></div> <div class="tm-counter-container__footer"><span class="tm-rating__text tm-rating__text">
      Рейтинг
    </span></div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name tm-user-card__name_variant-article">Аня Сокол</span> <a class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article" href="/ru/users/Anna_sokol22/">
          @Anna_sokol22
        </a> <!-- --></div> <p class="tm-user-card__short-info tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons tm-user-card__buttons_variant-article"><!-- --> <!-- --> <!-- --> <!-- --> <!-- --></div></div> <!-- --></div> <div class="v-portal" style="display:none;"></div></div> <!-- --></section> <!-- --> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" href="/ru/company/southbridge/blog/718534/comments/"><svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24"><title>Комментарии</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментировать 
    </span></a> <!-- --></div></div></div> <section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2> </div> <!-- --></header> <div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><div class="tm-tabs tm-tabs"><div><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim">
        Лучшие за сутки
      </button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link tm-tabs__tab-link_slim">
        Похожие
      </button></span></div> <!-- --></div> <div class="similar-and-daily__tab-view"><div><!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <div class="tm-placeholder-article-cards"><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div> <div class="tm-placeholder__user-date loads"></div></div> <div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div> <div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div> <div class="tm-placeholder-article-card__icons tm-placeholder__counters"><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div> <div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div></div></div></div> <!-- --> <!-- --> <!-- --> <!-- --></div> <!-- --></div></div> <!-- --></section> <div><!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div> <div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div> <div class="tm-project-block-items__properties"><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width: 100px;"></span></span></div></li></ul></div> <div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --> <!-- --></div> <!-- --> </div></div></div></div></div> <div class="tm-page__sidebar"><!-- --></div></div></div></div></main> <!-- --></div> <!-- --> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><div class="tm-footer__title"><a class="tm-svg-icon__wrapper tm-footer__title-link router-link-active" href="/ru/"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a></div> <div class="tm-footer__social"><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="16" width="16"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <div class="v-portal" style="display:none;"></div> <button class="tm-footer__link"><svg class="tm-svg-img tm-footer__icon" height="16" width="16"><title>Язык</title> <use xlink:href="/img/megazord-v28.2b11c25e..svg#lang"></use></svg>
        Настройка языка
      </button> <a class="tm-footer__link" href="/ru/feedback/">
        Техническая поддержка
      </a> <a class="tm-footer__link" href="/berserk-mode-nope">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2023, </span> <span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span></div></div></div></div> <!-- --> <!-- --></div> <div class="vue-portal-target"></div></div>








</body>
</html>
